<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Captcha App</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body, html {
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f8f9fa;
        }
        .captcha-box {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            background: white;
        }
        canvas {
            display: block;
            margin: 10px 0;
        }
        @media (max-width: 576px) {
            .captcha-box {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="captcha-box text-center">
        <h3>Captcha Verification</h3>
        <!-- Captcha Canvas -->
        <canvas id="captchaCanvas" width="200" height="50"></canvas>
        <!-- Input for the Captcha -->
        <input type="text" id="captchaInput" class="form-control mb-3" placeholder="Enter the text shown above">
        <!-- Error Message -->
        <div id="errorMessage" class="text-danger mb-3"></div>
        <!-- Submit Button -->
        <button id="submitBtn" class="btn btn-primary">Submit</button>
    </div>

    <script>
        // Generate a random captcha
        function generateCaptcha() {
            return Math.random().toString(36).slice(2, 8).toUpperCase();
        }

        // Draw the captcha on the canvas
        function drawCaptcha(captchaText) {
            const canvas = document.getElementById('captchaCanvas');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = '30px Arial';
            ctx.fillStyle = '#343a40';
            ctx.fillText(captchaText, 20, 35);

            // Add noise
            for(let i = 0; i < 10; i++) {
                ctx.beginPath();
                ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.strokeStyle = '#ced4da';
                ctx.stroke();
            }
        }

        // Validate the captcha
        function validateCaptcha() {
            const userInput = document.getElementById('captchaInput').value.toUpperCase();
            if (userInput === captchaText) {
                alert('Captcha verified successfully!');
            } else {
                document.getElementById('errorMessage').innerText = 'Incorrect captcha. Please try again.';
            }
        }

        // Initialize the captcha
        const captchaText = generateCaptcha();
        drawCaptcha(captchaText);

        // Set up event listener for the submit button
        document.getElementById('submitBtn').addEventListener('click', validateCaptcha);
    </script>
</body>
</html>